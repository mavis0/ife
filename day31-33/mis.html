<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">    
        <title>IFE ECMAScript</title>
    </head>
    <body>
    <!-- <select id="region-select">
    </select>
    <select id="product-select">
    </select> -->
    <div id="region-checkbox">
    </div>
    <div id="product-checkbox">
    </div>
    <div id="table-wrapper">
    </div>
    </body>
</html>
<script type="module">
    import sourceData from "./ife31data.js"
    import getCheckboxOption from "./getCheckBoxOption.js"
    import generateTable from "./generateTable.js"
    import addListener from "./addListener.js"

    let tableWapper= document.getElementById('table-wrapper');
    let regionCheckbox = document.getElementById('region-checkbox');
    let productCheckbox = document.getElementById('product-checkbox');
    getCheckboxOption('region', regionCheckbox);
    getCheckboxOption('product', productCheckbox);
    addListener('region', regionCheckbox, tableWapper);
    addListener('product', productCheckbox, tableWapper);
    generateTable(tableWapper);


    // regionCheckbox.addEventListener('click', (e) => {
    //     if (e.target.name == undefined) return;
    //     let regionAll = document.getElementsByName('region-all')[0];
    //     let regions = document.getElementsByName('region');
    //     let checkNum = Array.from(regions).filter(s => s.checked).length;
    //     if (e.target.name !== 'region-all') {
    //         if (!e.target.checked && checkNum == 0) e.preventDefault();
    //         if (checkNum == 3) regionAll.checked = true;
    //         if (!e.target.checked && checkNum == 2) regionAll.checked = false;
    //     } else {
    //         regions.forEach(x => x.checked = true);
    //     }
    //     generateTable();
    // })

    // productCheckbox.addEventListener('click', () => {
    //     generateTable();
    // })
    // regionSelect.addEventListener('change', () => {
    //     generateTable();
    // })
    // productSelect.addEventListener('change', () => {
    //     generateTable();
    // })

    // let productSelect = document.getElementById('product-select');
    // let regionSelect = document.getElementById('region-select');
    // getOption();
    // generateTable();
    // regionSelect.addEventListener('change', () => {
    //     generateTable();
    // })
    // productSelect.addEventListener('change', () => {
    //     generateTable();
    // })
    // function getOption () {
    //     let regions = sourceData.map(x => x.region);
    //     let products = sourceData.map(x => x.product);
    //     for (let region of new Set(regions)) {
    //         let option = document.createElement('option');
    //         option.innerHTML = region;
    //         regionSelect.append(option);
    //     }
    //     for (let product of new Set(products)) {
    //         let option = document.createElement('option');
    //         option.innerHTML = product;
    //         productSelect.append(option);
    //     }
    // }
    // function getSelectedData () {
    //     let regionSelected = regionSelect.value;
    //     let productSelected = productSelect.value;
    //     return sourceData.filter(s => s.region === regionSelected && s.product === productSelected);
    // }
</script>